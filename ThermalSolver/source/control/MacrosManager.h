//
// 文件名:     MacrosManager.h
// 软件包:     JAUMIN
// 版权　:     北京应用物理与计算数学研究所
// 版本号:     $Revision: 0 $
// 修改　:     $Date: 1017-04-28
// 描述　:     自定义宏及数据类型
// 类别　:     %Internal File% ( Don't delete this line )
//

#ifndef _MACROSMANAGER_H_
#define _MACROSMANAGER_H_

// @  update #5 计算三位坐标系中三角形面积
// @  at 2017-04-25 by tong
// @  code by zhu
// @  used by:PatchStrategy.h(.cpp)
// @  测试：目前没问题
#define AREA(a, b, c)                      \
  ((((b)[1] - (a)[1]) * ((c)[2] - (a)[2]) -((b)[2] - (a)[2]) * ((c)[1] - (a)[1]))*(((b)[1] - (a)[1]) * ((c)[2] - (a)[2]) -((b)[2] - (a)[2]) * ((c)[1] - (a)[1]))+\
  (((b)[2] - (a)[2]) * ((c)[0] - (a)[0]) -((b)[0] - (a)[0]) * ((c)[2] - (a)[2]))*(((b)[2] - (a)[2]) * ((c)[0] - (a)[0]) -((b)[0] - (a)[0]) * ((c)[2] - (a)[2]))+\
  (((b)[0] - (a)[0]) * ((c)[1] - (a)[1]) -((b)[1] - (a)[1]) * ((c)[0] - (a)[0]))*(((b)[0] - (a)[0]) * ((c)[1] - (a)[1]) -((b)[1] - (a)[1]) * ((c)[0] - (a)[0])))

// @  update #5 2017-04-26
// @  used by:PatchStrategy.h(.cpp)
// @  功能：管理使用那种力载荷方式
// @  测试：目前没问题
#define NODE_LOAD 0  //1： 存在节点力载荷； 0： 不存在
#define FACE_LOAD 0  //1： 存在表面力载荷； 0： 不存在

// @  update #6 2017-05-02
// @  used by: PatchStrategy.h(.cpp)
// @  功能：定义一个结构体
//         数据内容为某一节点处的前两步、前一步的解向量及右端项值
//         用于计算使用Newmark-beta方法时的右端项向量
// @  测试：目前没问题
struct NewmarkData
{
    double v_solution_older[NDIM];
    double v_solution_old[NDIM];
    double v_rhs_older[NDIM];
    double v_rhs_old[NDIM];
};

// @  update #5 2017-05-02
// @  used by:LinearTet.h(.cpp), PatchStrategy.h(.cpp)
// @  功能：管理使用静态求解或者瞬态求解
// @  两个值不能同时为0或1
// @  测试：未测试
#define STATIC_S 0  //1： 存在节点力载荷； 0： 不存在
#define TIME_S 1  //1： 存在表面力载荷； 0： 不存在

#define THERMAL_SOURCE 0

// @  update #6 2017-05-02
// @  used by:LinearTet.h(.cpp), PatchStrategy.h(.cpp)
// @  功能：Newmark-beta方法中的beta值
// @  描述：大于等于1/4时无条件稳定
const double BETA=1;

// @  基本材料属性结构体
const int ENTITY_NUM=670;
//const int Copper_id[]={7, 8, 15, 16, 23, 24, 31, 32, 39, 40, 47, 48, 55, 56, 63, 64,
//                      4,5,6,12,13,14,20,21,22,28,29,30,36,37,38,44,45,46,52,53,54,60,61,62};//2
const int Copper_id[]={4,5,6,7,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,138,139,140,141,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,272,273,274,275,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,406,407,408,409,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,540,541,542,543,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670};
//const int Aluminum_id[]={0};//13 into air
const int Aluminum_id[]={0};
//const int GaAs_id=375;//12
const int Al2O3_id[]={0};//11
//const int Nickel_id[]={2 ,275};//6
//const int Solder_bump_id[]={6,9,12,15,18,21};//7
//const int Underfill_id[]={1,2,3};//8
const int GaN_id[]={0};//3
const int Silicon_id[]={1, 3, 8, 10, 135, 137, 142, 144, 269, 271, 276, 278, 403, 405, 410, 412, 537, 539, 544, 546};
const int Alloy_id[]={0};//4
//const int BCB_id[]={1,3,7,16,25,34,43,52,61,70,79,106,137,138,139,
//140,141,142,143,144,145,146,147,148,246,247,248,249,250,251,252,
//253,254,255,256,257,355,356,357,358,359,360,361,362,363,364,365,
//366,464,465,467,468,469,470,471,472,473,454,475,573,574,575,576,
//577,578,579,580,581,582,583,584};//9  HT
const int SiO2_id[]={2, 9, 136, 143, 270, 277, 404, 411, 538, 545};//5
//const int MoCu_id=1;
//const int SiO2_id[]={};


// @  update #7 2017-05-06
// @  温变材料温度系数
// XX_Param_T[i][]:XX代表Au, Cu, Si, SiO2, SiC, GaN
// i=1-9, 分别代表电导率，介电常数，磁导率，密度，热导率，热容，热膨胀系数，杨氏模量，泊松比的温度系数
// Au 金
//update #7
enum Material_TParam_Type{e_sigma,e_epsilonr,e_mur,e_density,e_K,e_Cp,e_alpha,e_young_modulus,e_possion_ratio};
const double Gold_Param_T[9][5]=
{
		{4.52e7, 0,0,0,0},  //电导率
		{1.00,     0,      0,    0,      0},          //介电常数
		{1.00,      0,      0,    0,      0},          //磁导率
		{1.93e4,    0,      0,    0,      0},          //密度
        {3.2e2,     0,      0,    0,      0},          //热导率
		{229.1,     0,      0,    0,      0},          //热容
		{14.2e-6,      0,      0,    0,      0},          //热膨胀系数
		{78e9,      0,      0,    0,      0},          //杨氏模量
		{0.44,      0,      0,    0,      0},          //泊松比
};
// Cu 铜
const double Copper_Param_T[9][5]=
{
    {5.8e7,        0,           0,           0,           0},  //电导率
    {1.00,        0,           0,           0,           0},          //介电常数
    {1.00,        0,           0,           0,           0},          //磁导率
    {8.933e3,      0,           0,           0,           0},          //密度
    {400.,        0,           0,           0,           0},          //热导率
    {385.,        0,           0,           0,           0},          //热容
    {17.5e-6,        0,           0,           0,           0},//热膨胀系数
    {119e9,        0,           0,           0,           0},          //杨氏模量
    {0.32,       0,           0,           0,           0},          //泊松比
};
// Si 硅
const double Silicon_Param_T[9][5]=
{
    {0.001,       0,           0,           0,           0},          //电导率
    {11.9,        0,           0,           0,           0},          //介电常数
    {1.00,        0,           0,           0,           0},          //磁导率
    {2.2e3,      0,           0,           0,           0},          //密度
    {148,       0,           0,           0,           0},//热导率
    {730.,       0,           0,           0,           0},          //热容
    {2.6e-6,        0,           0,           0,           0},//热膨胀系数
    {104e9,        0,           0,           0,           0},  //杨氏模量
    {0.28,       0,           0,           0,           0},          //泊松比
};
// SiO2 二氧化硅
const double SiO2_Param_T[9][5]=
{
		{1e-12,       0,           0,           0,           0},          //电导率
		{3.9,        0,           0,           0,           0},          //介电常数
		{1.00,        0,           0,           0,           0},          //磁导率
		{2.20e3,      0,           0,           0,           0},          //密度
		{5.4335e-1,   0,     0,           0,           0},		  //热导率
        {703,       0,           0,           0,           0},          //热容
        {5.10000e-6,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数
		{68.640000e9, 0,  0.000000e0,  0.0000000e0, 0.000e0},    //杨氏模量
		{0.16,       0,           0,           0,           0},          //泊松比
};
// Alloy
const double Alloy_Param_T[9][5]=
{
		{1.82e6,       0,           0,           0,           0},          //电导率
		{1.00,        0,           0,           0,           0},          //介电常数
		{1.00,        0,           0,           0,           0},          //磁导率
		{8.26e3,      0,           0,           0,           0},          //密度
		{14.18171,   0.0066707,     0,           0,           0},		  //热导率
		{297.6798,       0.672727,           -3.10846e-4,           0,           0},          //热容
		{5.3e-6,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数
		{4.6842e11, -1.88029e8,  428272.9,  -260.05013, 0.000e0},    //杨氏模量
		{0.3,       0,           0,           0,           0},          //泊松比
};
// Alloy
const double Al2O3_Param_T[9][5]=
{
    {0.001,       0,           0,           0,           0},          //电导率
    {9.00,        0,           0,           0,           0},          //介电常数
    {1.00,        0,           0,           0,           0},          //磁导率
    {3.97e3,      0,           0,           0,           0},          //密度
    {27,   0,     0,           0,           0},		  //热导率
    {900,        0,           0,           0,           0},          //热容
    {8,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数
    {300,        0,           0,           0,           0},    //杨氏模量
    {0.22,       0,           0,           0,           0},          //泊松比
};
const double BCB_Param_T[9][5]=
{
		{1200,       0,           0,           0,           0},          //电导率
		{2.65,        0,           0,           0,           0},          //介电常数
		{1.00,        0,           0,           0,           0},          //磁导率
		{1.050e3,      0,           0,           0,           0},          //密度
		{0.8511e-1,   6.97e-4,     0,           0,           0},		  //热导率
		{2128,       0,           0,           0,           0},          //热容
		{4.729,  0.127e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数
		{2.940000e9, 0.000000e0,  0.000000e0,  0.0000000e0, 0.000e0},    //杨氏模量
		{0.34,       0,           0,           0,           0},          //泊松比
};
// SiC 碳化硅
const double SiC_Param_T[9][5]=
{
		{0.000,       0,           0,           0,           0},          //电导率
		{0.00,        0,           0,           0,           0},          //介电常数  未知
		{0.00,        0,           0,           0,           0},          //磁导率  未知
		{0.0000,      0,           0,           0,           0},          //密度  未知
		{2.37400e3,   -1.46e1,     3.98e-2,     -5.21e-5,    2.67e-8},	  //热导率
		{0.000,       0,           0,           0,           0},          //热容  未知
		{0.000000e0,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数  未知
		{410.80000e9, 1.01000e-3,  1.13800e-8,  1.13800e-8,  -3.884e-12}, //杨氏模量
		{0.000,       0,           0,           0,           0},          //泊松比  未知
};
// GaN 氮化镓
const double GaN_Param_T[9][5]=
{
		{1e-20,       0,           0,           0,           0},          //电导率
		{9.0,        0,           0,           0,           0},          //介电常数  未知
		{1.0,        0,           0,           0,           0},          //磁导率  未知
		{6.07e3,      0,           0,           0,           0},          //密度  未知
		{130.0,   0,   		 0,    			 0,    		0.00e0},	  //热导率
		{0.000,       0,           0,           0,           0},          //热容  未知
		{0.053700e-2,  1.68000e-2,  -2.49700e-5, 2.43700e-8,  -9.726e-12}, //热膨胀系数
		{289.50000e9, -808320e-5,  -1.7070e-5,  5.55700e-9,  2.2200e-12}, //杨氏模量
		{0.000,       0,           0,           0,           0},          //泊松比  未知
};
// SiN 氮化硅
const double HT_Param_T[9][5]=
{
		{1e-12,       0,           0,           0,           0},          //电导率
		{2,        0,           0,           0,           0},          //介电常数  未知
		{1,        0,           0,           0,           0},          //磁导率  未知
		{1320,      0,           0,           0,           0},          //密度  未知
		{0.21,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},	  //热导率
		{200,       0,           0,           0,           0},          //热容  未知
		{36,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数  未知
		{2.55e9,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},    //杨氏模量
		{0.4,       0,           0,           0,           0},          //泊松比  未知
};
const double SiN_Param_T[9][5]=
{
		{1e-12,       0,           0,           0,           0},          //电导率
		{1,        0,           0,           0,           0},          //介电常数  未知
		{1,        0,           0,           0,           0},          //磁导率  未知
		{3100,      0,           0,           0,           0},          //密度  未知
		{20,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},	  //热导率
		{700,       0,           0,           0,           0},          //热容  未知
		{2.3,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数  未知
		{250e9,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},    //杨氏模量
		{0.23,       0,           0,           0,           0},          //泊松比  未知
};
const double MoCu_Param_T[9][5]=
{
		{2e7,       0,           0,           0,           0},          //电导率
		{1,        0,           0,           0,           0},          //介电常数  未知
		{1.00,        0,           0,           0,           0},          //磁导率  未知
		{9910,      0,           0,           0,           0},          //密度  未知
		{208,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},	  //热导率
		{385,       0,           0,           0,           0},          //热容  未知
		{6,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数  未知
		{200e9,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},    //杨氏模量
		{0.3,       0,           0,           0,           0},          //泊松比  未知
};
const double GaAs_Param_T[9][5]=
{
		{1e-12,       0,           0,           0,           0},          //电导率
		{12.9,        0,           0,           0,           0},          //介电常数  未知
		{1.00,        0,           0,           0,           0},          //磁导率  未知
		{5370,      0,           0,           0,           0},          //密度  未知
		{35,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},	  //热导率
		{550,       0,           0,           0,           0},          //热容  未知
		{5.9,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数  未知
		{85e9,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},    //杨氏模量
		{0.31,       0,           0,           0,           0},          //泊松比  未知
};
const double Aluminum_Param_T[9][5]=
{
		{38000000,       0,           0,           0,           0},          //电导率
		{1.00,        0,           0,           0,           0},          //介电常数  未知
		{1.00,        0,           0,           0,           0},          //磁导率  未知
		{2689,      0,           0,           0,           0},          //密度  未知
		{237.5,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},	  //热导率
		{951,       0,           0,           0,           0},          //热容  未知
		{23.2e-6,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数  未知
		{71.7,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},    //杨氏模量
		{0.33,       0,           0,           0,           0},          //泊松比  未知
};
// Default 默认值
const double Default_Param_T[9][5]=
{
		{0.000,       0,           0,           0,           0},          //电导率
		{0.00,        0,           0,           0,           0},          //介电常数  未知
		{0.00,        0,           0,           0,           0},          //磁导率  未知
		{0.0000,      0,           0,           0,           0},          //密度  未知
		{0.00000e0,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},	  //热导率
		{0.000,       0,           0,           0,           0},          //热容  未知
		{0.000000e0,  0.000000e0,  0.0000000e0, 0.000000e0,  0.000e0},	  //热膨胀系数  未知
		{0.00000e0,   0.000e0,     0.0000e0,    0.0000e0,    0.000e0},    //杨氏模量
		{0.000,       0,           0,           0,           0},          //泊松比  未知
};

//const double vpulse1[201]={};

const double vpulse[102]=
{0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,
0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,
0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,
0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,
0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,0,5.75e-6,
};

const double vpulse2[121]=
{
    0.200000,0.200000,0.200000,0.200000,0.200000,0.260000,0.320000,0.380000,0.440000,0.500000,
    0.500000,0.500000,0.500000,0.500000,0.500000,0.440000,0.380000,0.320000,0.260000,0.200000,
    0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,
    0.260000,0.320000,0.380000,0.440000,0.500000,0.500000,0.500000,0.500000,0.500000,0.500000,
    0.440000,0.380000,0.320000,0.260000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,
    0.200000,0.200000,0.200000,0.200000,0.200000,0.260000,0.320000,0.380000,0.440000,0.500000,
    0.500000,0.500000,0.500000,0.500000,0.500000,0.440000,0.380000,0.320000,0.260000,0.200000,
    0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,
    0.260000,0.320000,0.380000,0.440000,0.500000,0.500000,0.500000,0.500000,0.500000,0.500000,
    0.440000,0.380000,0.320000,0.260000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,
    0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,
    0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,0.200000,
    0.200000
};

//const double vpulse2[121]={0.600000,0.600000,0.600000,0.600000,0.614584,0.756564,0.957860,1.137152,1.309740,1.456243,1.531536,1.510340,1.500000,1.499538,1.475906,1.320000,1.140000,0.960000,0.787648,0.625871,0.559790,0.587119,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.614707,0.632744,0.780000,0.960000,1.140000,1.309874,1.427003,1.498782,1.523795,1.502555,1.494672,1.485343,1.320000,1.140000,0.960000,0.795108,0.669064,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.642110,0.786188,0.960000,1.140000,1.320000,1.449574,1.516868,1.501644,1.500000,1.500000,1.492937,1.318616,1.140000,0.960000,0.786952,0.673751,0.610770,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.656129,0.780000,0.960000,1.140000,1.320000,1.414553,1.466015,1.500000,1.500000,1.499378,1.456357,1.320000,1.140000,0.960000,0.786444,0.670558,0.605122,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000,0.600000};
const double vpulse3[102]=
{
0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,
0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,
0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,
0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,
0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,0,0.05,
} ;

#endif
