//
// 文件名:     buildApplicationLib.h
// 软件包:     JAUMIN
// 版权　:     北京应用物理与计算数学研究所
// 版本号:     $Revision: 0 $
// 修改　:     $Date: Tue May 20 08:24:04 2014 $
// 描述　:     将用户创建的形函数, 积分器, 单元, 材料等添加到相应管理器.
// 类别　:     %Internal File% ( Don't delete this line )
//

/**
 * @file   buildApplicationLib.h
 * @author weibo zhao <zhao_weibo@iapcm.ac.cn>
 * @date   Mon Aug 26 11:40:27 2013
 *
 * @brief
 *
 *
 */

#include "LinearTet.h"
#include "Pointer.h"
#include "Array.h"

#include "IntegratorManager.h"
#include "ShapeFunctionManager.h"
#include "ElementManager.h"
#include "MaterialManager.h"
#include "ShapeFunctionManager.h"
#include "IntegratorManager.h"
#include "Material.h"
#include "TetrahedronShapeFunction.h"
#include "TetrahedronIntegrator.h"

#include "LinearTet.h"

using namespace JAUMIN;

void buildApplicationLib() {
  /// 取出各个管理器(形函数, 积分器, 单元, 材料).
  tbox::Pointer<ShapeFunctionManager<NDIM> > func_manager =
      ShapeFunctionManager<NDIM>::getManager();
  tbox::Pointer<IntegratorManager<NDIM> > integrator_manager =
      IntegratorManager<NDIM>::getManager();
  tbox::Pointer<ElementManager<NDIM> > ele_manager =
      ElementManager<NDIM>::getManager();
  tbox::Pointer<MaterialManager<NDIM> > material_manager =
      MaterialManager<NDIM>::getManager();

  /// 添加一个单元到单元管理器.
  tbox::Pointer<LinearTet> linear_ele = new LinearTet("LinearTetrahedron");
  ele_manager->addElement(linear_ele);

  /// 添加一种材料到材料管理器.
  tbox::Pointer<Material> material = new Material("LinearTetrahedron");
  material_manager->addMaterial(material);

  /// 添加一个形函数到形函数管理器.
  tbox::Pointer<BaseShapeFunction<NDIM> > func =
      new TetrahedronShapeFunction("LinearTetrahedron");
  func_manager->addShapeFunction(func);

  /// 添加一个积分器到积分器管理器.
  tbox::Pointer<BaseIntegrator<NDIM> > integrator =
      new TetrahedronIntegrator(1, "LinearTetrahedron");
  integrator_manager->addIntegrator(integrator);
}
